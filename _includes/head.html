<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% if page.title %}{{ page.title }} - {% endif %}{{ site.title }}</title>
    <meta name="description" content="{{ page.description | default: site.description }}">
    <meta name="base-url" content="{{ site.baseurl }}">

    <!-- Social Media Meta Tags -->
    {% include social-meta.html %}

    <!-- DNS Prefetch for performance -->
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">

    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="{{ '/assets/images/logo_32.png' | relative_url }}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ '/assets/images/logo_16.png' | relative_url }}">
    <link rel="apple-touch-icon" sizes="180x180" href="{{ '/assets/images/logo_256.png' | relative_url }}">

    <!-- Preload critical resources -->
    <link rel="preload" href="{{ '/assets/css/design-system.css' | relative_url }}" as="style">

    <!-- CSS - Consolidated Design System -->
    <link rel="stylesheet" href="{{ '/assets/css/design-system.css' | relative_url }}">

    <!-- Additional CSS for specific pages -->
    {% if page.layout == 'docs-benchmarks' %}
    <link rel="stylesheet" href="{{ '/assets/css/benchmarks.css' | relative_url }}">
    {% endif %}

    <!-- Theme Color -->
    <meta name="theme-color" content="#7C3AED">

    <!-- Prevent FOUC (Flash of Unstyled Content) -->
    <script>
        // Remove no-js class immediately
        document.documentElement.classList.remove('no-js');
        
        // Apply saved theme immediately to prevent theme flash
        (function() {
            const saved = localStorage.getItem('pivotphp-theme');
            const theme = ['light', 'dark'].includes(saved) ? saved : 'light';
            document.documentElement.setAttribute('data-theme', theme);
        })();
    </script>
    
    <!-- Theme Toggle System -->
    <script src="{{ '/assets/js/theme-toggle.js' | relative_url }}" defer></script>
    
    <!-- Language Routes System -->
    <script src="{{ '/assets/js/language-routes.js' | relative_url }}"></script>
</head>
